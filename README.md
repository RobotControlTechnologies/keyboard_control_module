# Модуль управления роботом для клавиатуры
-----------------------------

Клавиатура - самое старое, распространенное и доступное устройство ввода для ПК. :) А по отношению к ручному режиму управления роботом в RCML ещё и очень перспективное: 101 клавиша - 101 бинарная ось.
Однако роботы чаще обладают осями не бинарными, для которых возможно изменение значений как в большую, так и в нижнюю сторону от исходного.

Данный модуль через свой конфигурационный файл позволяет задать:
- какими осями он будет обладать в среде RCML
- какие клавиши к какому значению будут приводить ось в нажатом и отпущенном состоянии.

Благодаря этому можно, в том числе, и задать две клавиши на одну ось.
*Например, закрепить стрелку вверх за увеличением значения оси движения робота в нажатом состоянии, а стрелку вниз, наоборот, за уменьшением значения оси в нажатом состоянии.
И робот соответственно ехал бы вперед или назад, а при отпускании клавиши останавливался (как это сделано у нашего робота [модели "Таракан"] (https://github.com/RobotControlTechnologies/tarakan_robot_module)).*

**Внимание! Оси данного модуля могут быть не постоянными, т.к. задаются через конфигурационный файл. А значит поведение RCML программы использующей этот модуль и скомпилированной с участием этого модуля может быть неопределено при изменении конфигурации данного модуля!**
Т.к. среда RCML проверяет только уникальность самого модуля, а не его файлов.

- все оси, создаваемые модулем - дискретные, однако можно задавать значения осей с неравномерным шагом;
- для выхода из режима управления, инициированного с данным модулем, используется клавиша **_ESCAPE_**;
- вся конфигурация модуля задается в файле **_config.ini_** в папке модуля.

-----------------------------

####Общие правила задания новых осей:
- в секции **_mapped_axis_** задается связь оси и клавиши клавиатуры;
- связь создается указанием наименования оси в качестве ключа и HEX кода клавиши, связываемой с ней, в качестве значения;
- ось создается модулем только при наличии связи; 
- для каждой создаваемой оси должен быть создан раздел с именем, совпадающим с именованием оси. В данном разделе должны быть указаны верхняя и нижняя границы значений оси, в ключах **_upper_value_** и **_lower_value_** соответственно;
- для каждой связи оси и клавиши создается секция описания поведения оси при изменении положения клавиши, с именем по следующему шаблону: **ось_клавиша**
- в секции описания поведения оси должно быть указаны значения оси при нажатой и отпущенной клавише, в ключах **_pressed_value_** и **_unpressed_value_** соответственно.

[HEX коды клавиш клавиатуры](https://msdn.microsoft.com/en-us/library/windows/desktop/dd375731(v=vs.85).aspx)

-----------------------------

####Пример конфигурации модуля. 
- создается ось с именем *go*, именно под ним она будет доступна в RCML;
- на эту ось назначается две клавиши: *стрелка_вверх* и *стрелка_вниз*;
- ось имет диапазон значений от -1 до 1;
- нажатие клавиши *стрелка_вверх* будет изменять значение оси на число 1, отпускание клавиши на число 0;
- нажатие клавиши *стрелка_вниз* будет изменять значение оси на число -1, отпускание клавиши на число 0.

####Компиляция
Для компиляции модуля потребуется библиотека [SimpleIni](https://github.com/brofield/simpleini)